<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تماس با ریاست</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-9ndCyUa6mY2c1y9+3qDgZt9V7kbiH6ZFtPH0N9ZdvSdCge3v5WeD+XHBOH5XjDA6"
          crossorigin="anonymous">

    <!-- Font Awesome CSS -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
          integrity="sha512-6xU0v1uRz8Xt0NjqxODABKdcI3dBu8KkP9DkOePrmfY3Mf1nEypqBWz1Uu6K+mH71e9Hw+5Hxkz5U1wXadfsZg=="
          crossorigin="anonymous" />

    <style>
        body {
            font-family: 'Vazir', sans-serif;
            background-color: #f8f9fa;
        }
        .header {
            background: linear-gradient(90deg, #007bff, #00a8ff);
            color: white;
            padding: 100px 0;
            text-align: center;
        }
        .header h1 {
            font-size: 3rem;
            font-weight: bold;
        }
        .header p {
            font-size: 1.2rem;
            margin-top: 20px;
        }
        .contact-form {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: -50px;
        }
        .form-control {
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
        }
        .form-control:focus {
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
        .btn-primary {
            background-color: #007bff;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }
        .footer {
            background-color: #007bff;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 50px;
        }
        .captcha img {
            height: 40px;
        }
    </style>
</head>
<body>

<!-- هدر -->
<div class="header">
    <div class="container">
        <h1>تماس با ریاست کانون وکلای دادگستری استان همدان</h1>
        <p>نظرات، پیشنهادات و انتقادات خود را با ما در میان بگذارید.</p>
    </div>
</div>

<!-- فرم تماس -->
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="contact-form">
                <form method="post" novalidate>
                    {% csrf_token %}
                    {% for field in form %}
                        {% if field.name == 'captcha' %}
                            <div class="mb-3">
                                <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                                <div class="d-flex align-items-center gap-3 captcha">
                                    {{ field }}

                                </div>
{#                                {% if field.errors %}#}
{#                                    <div class="text-danger">{{ field.errors.as_text }}</div>#}
{#                                {% endif %}#}
                            </div>
                        {% else %}
                            <div class="mb-3">
                                <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                                {{ field }}

                            </div>
                        {% endif %}
                    {% endfor %}

                    <button type="submit" class="btn btn-primary w-100">ارسال پیام</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- فوتر -->
<div class="footer">
    <div class="container">
        <p>تمامی حقوق محفوظ است &copy; 1403</p>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>

<!-- JS برای رفرش دستی و خودکار کپچا -->
<script>
    function refreshCaptcha() {
    const img = document.querySelector(".captcha img");
    const hiddenInput = document.querySelector("input[name='captcha_0']");

    fetch("/captcha/refresh/")
        .then(response => response.json())
        .then(data => {
            img.src = data.image_url + '?t=' + new Date().getTime(); // جلوگیری از کش
            hiddenInput.value = data.key;
        })
        .catch(error => {
            console.error("خطا در بارگذاری کپچای جدید:", error);
        });
}
</script>

</body>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const refreshButton = document.getElementById('refresh-captcha');
    const captchaImg = document.querySelector('.captcha img');
    const captchaKeyInput = document.querySelector('input[name="captcha_0"]');

    refreshButton.addEventListener('click', function () {
        fetch('/captcha/refresh/')
            .then(response => response.json())
            .then(data => {
                // بروزرسانی تصویر و کلید مخفی
                captchaImg.src = data.image_url + '?t=' + new Date().getTime();
                captchaKeyInput.value = data.key;
            })
            .catch(error => {
                console.error('خطا در رفرش کپچا:', error);
            });
    });
});
</script>

</html>
